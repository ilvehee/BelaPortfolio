
<!DOCTYPE html>
<html lang="tl">
<head>
    <meta charset="utf-8">
    <title>AP Portfolio</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="ap.css" type="text/css">
</head>
<body>

    <header class="site-header">
        <h1 class="site-title">ARALING PANLIPUNAN</h1>
        <p class="subtitle">YUNIT II — MAYKROEKONOMIKS</p>
    </header>

    <main class="main-content">

          <!-- DEMAND -->
  <section class="lesson">
    <div class="lesson-bg">
      <img src="demand1.jpg" alt="Demand Lesson 1" class="lesson-img">
      <img src="demand2.jpg" alt="Demand Lesson 2" class="lesson-img">
    </div>
    <h2 class="lesson-title">DEMAND</h2>
    <div class="lesson-text">

            <article class="lesson-body">
                <h3 class="section-title">Konsepto ng Demand</h3>
                <p>Ang <strong>demand</strong> ay tumutukoy sa dami ng produkto o serbisyo na gusto at <em>kayang bilhin</em> ng mga mamimili sa isang takdang presyo at partikular na panahon. Ang kakayahan at kagustuhan ng tao na makamit at bilhin ang isang produkto o serbisyo ang nagtatakda ng kaniyang pangangailangan at kagustuhan.</p>

                <div class="flashcard-area">
                    <div class="flashcard" tabindex="0">
                        <div class="front">Ano ang Demand?</div>
                        <div class="back">Dami ng produkto o serbisyo na gusto at kayang bilhin ng mga mamimili.</div>
                    </div>
                </div>

                <h3 class="section-title">Kaugnayan ng Presyo sa Demand</h3>
                <p>Ang presyo ang pinakamahalagang <strong>determinant</strong> ng dami ng demand. Kapag mataas ang presyo, karaniwang bumababa ang demand; at kapag mababa naman ang presyo, tumataas ang demand.</p>

                <h3 class="section-title">Batas ng Demand</h3>
                <p>Kapag tumataas ang presyo, bumababa ang dami ng gustong bilhin, at kapag bumababa ang presyo, tumataas naman ang dami ng gustong bilhin. <em>(CETERIS PARIBUS — ipinapalagay na ang iba pang salik ay hindi nagbabago)</em>.</p>

                <h3 class="section-title">Dahilan ng Inverse na Ugnayan sa Presyo at Demand</h3>
                <ol>
                    <li><strong>Substitution Effect</strong> — Kung tumaas ang presyo ng isang produkto, naghahanap ng pamalit na mas mura ang mamimili; bumababa ang demand sa unang produkto.</li>
                    <li><strong>Income Effect</strong> — Kung bumaba ang presyo, tumataas ang kakayahan bumili ng mamimili; kung tumaas ang presyo, lumiit ang kakayahan bumili.</li>
                </ol>

                <h3 class="section-title">Mathematical Formula</h3>
                <p class="formula">Demand = Kagustuhan + Kakayahan</p>

                <h3 class="section-title">Demand Function</h3>
                <p class="formula"><strong>Qd = a - bP</strong></p>
                <button class="toggle-btn" data-target="demandFunc" onclick="toggleShow('demandFunc')">pindutin!</button>
                <div id="demandFunc" class="toggle-content" style="display:none">
                    <ul>
                        <li><em>Qd</em> — dami ng demand</li>
                        <li><em>a</em> — dami ng demand kapag presyo = 0</li>
                        <li><em>b</em> — slope ng demand function</li>
                        <li><em>P</em> — presyo</li>
                    </ul>
                </div>

                <h3 class="section-title">Demand Schedule</h3>
                <p>Talahanayan ng dami sa iba't ibang presyo.</p>
                <button class="toggle-btn" data-target="demandTable" onclick="toggleShow('demandTable')">pindutin!</button>
                <table id="demandTable" class="data-table" style="display:none">
                    <thead><tr><th>Presyo (P)</th><th>Quantity Demanded (Qd)</th></tr></thead>
                    <tbody>
                        <tr><td>100</td><td>10</td></tr>
                        <tr><td>80</td><td>20</td></tr>
                        <tr><td>60</td><td>30</td></tr>
                        <tr><td>40</td><td>40</td></tr>
                    </tbody>
                </table>

                <h3 class="section-title">Demand Curve</h3>
                <p>Grapikong representasyon ng batas ng demand (pababa ang kurba — negatibong relasyon ng presyo at dami).</p>

                <h3 class="section-title">Mga Salik na Nakaaapekto sa Demand</h3>
                <ul>
                    <li>Kita ng Mamimili — kapag tumaas, tumataas ang kakayahang bumili.</li>
                    <li>Panlasa o Kagustuhan — produkto ayon sa uso o hilig, tumataas ang demand.</li>
                    <li>Dami ng Mamimili — kapag mas marami, tumataas ang demand (bandwagon effect).</li>
                    <li>Presyo ng Magkaugnay na Produkto:
                        <ul>
                            <li><em>Komplementaryo</em> — sabay ginagamit; pag tumaas ng presyo ng isa, bababa ang demand ng kabilang produkto.</li>
                            <li><em>Pamalit (Substitute)</em> — pag tumaas ng presyo ng isang produkto, tataas ang demand sa pamalit nito.</li>
                        </ul>
                    </li>
                    <li>Inaasahan sa Hinaharap — kung inaasahan tumataas ang presyo, tataas ang demand ngayon.</li>
                    <li>Okasyon at Panahon — tumataas ang demand sa mga produktong kaugnay ng okasyon o panahon.</li>
                    <li>Klima — pagbabago ayon sa klima at panahon.</li>
                </ul>
            </article>
        </section>

  <!-- SUPPLY -->
  <section class="lesson">
    <div class="lesson-bg">
      <img src="supply1.jpg" alt="Supply Lesson 1" class="lesson-img">
      <img src="supply2.jpg" alt="Supply Lesson 2" class="lesson-img">
    </div>
    <h2 class="lesson-title">SUPPLY</h2>
    <div class="lesson-text">

            <article class="lesson-body">
                <h3 class="section-title">Konsepto ng Supply</h3>
                <p>Ang <strong>supply</strong> ay dami ng produkto o serbisyo na gustong ibenta ng mga prodyuser sa isang takdang presyo at panahon.</p>

                <div class="flashcard-area">
                    <div class="flashcard" tabindex="0">
                        <div class="front">Ano ang Supply?</div>
                        <div class="back">Dami ng produkto o serbisyo na gustong ipagbili ng mga prodyuser.</div>
                    </div>
                </div>

                <h3 class="section-title">Kaugnayan ng Presyo sa Supply</h3>
                <p>Ang presyo ang pangunahing salik na nakaaapekto sa dami ng supply. Kapag mataas ang presyo, tataas ang dami ng gustong ipagbili; kapag mababa, bababa rin ang supply.</p>

                <h3 class="section-title">Batas ng Supply</h3>
                <p>Kapag tumataas ang presyo, tumataas ang dami ng gustong ibenta; kapag bumababa, bababa rin ang gustong ibenta. <em>(CETERIS PARIBUS)</em></p>

                <h3 class="section-title">Mathematical Formula</h3>
                <p class="formula">Supply = Pagnanais + Kakayahan</p>

                <h3 class="section-title">Supply Function</h3>
                <p class="formula"><strong>Qs = -a + bP</strong></p>
                <button class="toggle-btn" data-target="supplyFunc" onclick="toggleShow('supplyFunc')">Ipakita ang kahulugan</button>
                <div id="supplyFunc" class="toggle-content" style="display:none">
                    <ul>
                        <li><em>Qs</em> — dami ng suplay</li>
                        <li><em>a</em> — dami ng supply kapag presyo = 0</li>
                        <li><em>b</em> — slope ng supply function</li>
                        <li><em>P</em> — presyo</li>
                    </ul>
                </div>

                <h3 class="section-title">Supply Schedule at Curve</h3>
                <p>Talahanayan at grapikong representasyon — kadalasang pataas ang kurba (positibong relasyon ng presyo at quantity supplied).</p>

                <h3 class="section-title">Mga Salik na Nakaaapekto sa Supply</h3>
                <ul>
                    <li>Pagbabago sa teknolohiya</li>
                    <li>Pagbabago sa halaga ng mga salik ng produksyon</li>
                    <li>Pagbabago sa bilang ng nagtitinda</li>
                    <li>Pagbabago sa presyo ng kaugnay na produkto (komplementaryo o pamalit)</li>
                    <li>Ekspektasyon sa presyo</li>
                    <li>Okasyon, panahon, o klima</li>
                    <li>Kalamidad</li>
                    <li>Dali ng pagkasira ng produkto</li>
                    <li>Subsidyo o tulong ng pamahalaan</li>
                </ul>
            </article>
        </section>

  <!-- PRICE ELASTICITY -->
  <section class="lesson">
    <div class="lesson-bg">
      <img src="price1.jpg" alt="Price Elasticity 1" class="lesson-img">
      <img src="price2.jpg" alt="Price Elasticity 2" class="lesson-img">
    </div>
    <h2 class="lesson-title">PRICE ELASTICITY</h2>
    <div class="lesson-text">

            <article class="lesson-body">
                <h3 class="section-title">Konsepto</h3>
                <p>Ang elastisidad ay paraan upang masukat kung gaano kalaki ang pagtugon ng <em>quantity demanded</em> sa bawat porsyento ng pagbabago ng presyo.</p>

                <h3 class="section-title">Formula</h3>
                <p class="formula"><strong>Ep = %ΔQ / %ΔP</strong></p>

                <h3 class="section-title">Mga Uri ng Elastisidad</h3>
                <table class="data-table">
                    <thead><tr><th>Coefficient</th><th>Kahulugan</th><th>Uri</th></tr></thead>
                    <tbody>
                        <tr><td>&gt; 1</td><td>Malaki ang bahagdan ng pagtugon ng Qd kaysa sa pagbabago ng presyo</td><td>Elastic</td></tr>
                        <tr><td>&lt; 1</td><td>Maliit ang bahagdan ng pagtugon ng Qd</td><td>Inelastic</td></tr>
                        <tr><td>= 1</td><td>Pareho ang bahagdan ng pagbabago</td><td>Unitary</td></tr>
                        <tr><td>∞</td><td>Anumang pagbabago sa presyo ay magdudulot ng walang hanggang pagbabago sa Qd</td><td>Perfectly Elastic</td></tr>
                        <tr><td>0</td><td>Hindi tumutugon ang Qd sa pagbabago ng presyo</td><td>Perfectly Inelastic</td></tr>
                    </tbody>
                </table>
            </article>
        </section>
   
  <!-- MARKET EQUILIBRIUM -->
  <section class="lesson">
    <div class="lesson-bg">
      <img src="market1.jpg" alt="Market Equilibrium 1" class="lesson-img">
      <img src="market2.jpg" alt="Market Equilibrium 2" class="lesson-img">
    </div>
    <h2 class="lesson-title">MARKET EQUILIBRIUM</h2>
    <div class="lesson-text">

            <article class="lesson-body">
                <h3 class="section-title">Konsepto ng Ekwilibriyo</h3>
                <p>Ang <strong>ekwilibriyo</strong> ay kalagayan kung saan pantay ang dami ng demand at supply sa isang takdang presyo. Sa puntong ito, walang sinuman sa mamimili o prodyuser ang gustong baguhin ang kasalukuyang kalagayan ng pamilihan.</p>

                <h3 class="section-title">Ekwilibriyong Presyo at Dami</h3>
                <ul>
                    <li><strong>Ekwilibriyong Presyo</strong> — pinagkasunduang presyo ng mamimili at prodyuser.</li>
                    <li><strong>Ekwilibriyong Dami</strong> — napagkasunduang dami ng produkto o serbisyo.</li>
                </ul>

                <h3 class="section-title">Disequilibrium</h3>
                <p>Kapag hindi magkapantay ang demand at supply:</p>
                <ul>
                    <li><strong>SHORTAGE</strong> — mas malaki ang demand kaysa sa supply.</li>
                    <li><strong>SURPLUS</strong> — mas marami ang supply kaysa sa demand.</li>
                </ul>

                <h3 class="section-title">Interactive: Solusyon para sa Ekwilibriyo</h3>
                <p>Baguhin ang mga parametro ng linear na demand at supply para makita ang <strong>P*</strong> at <strong>Q*</strong>. Mga ekwasyon:</p>
                <pre class="mono">Demand: Qd = a_d - b_d * P
Supply:  Qs = -a_s + b_s * P
Dito, Qd = Qs → hanapin ang P* at Q*</pre>

                <div class="controls">
                    <label>a<sub>d</sub>: <input id="ad" type="range" min="10" max="200" value="80" oninput="updateEQ()"><span id="adVal">80</span></label>
                    <label>b<sub>d</sub>: <input id="bd" type="range" min="1" max="10" value="1" oninput="updateEQ()"><span id="bdVal">1</span></label>
                    <label>a<sub>s</sub>: <input id="as" type="range" min="0" max="120" value="20" oninput="updateEQ()"><span id="asVal">20</span></label>
                    <label>b<sub>s</sub>: <input id="bs" type="range" min="1" max="10" value="1" oninput="updateEQ()"><span id="bsVal">1</span></label>
                </div>

                <div class="eq-results">
                    <p><strong>Presyong Ekwilibriyo (P*):</strong> <span id="pStar">—</span></p>
                    <p><strong>Damihang Ekwilibriyo (Q*):</strong> <span id="qStar">—</span></p>
                </div>

                <div class="graph-wrap">
                    <svg id="sdGraph" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet" class="graph">
                        <rect width="100%" height="100%" fill="transparent" rx="8"></rect>
                        <line x1="30" y1="260" x2="260" y2="260" stroke="#9fc2df" stroke-width="2"/>
                        <line x1="30" y1="260" x2="30" y2="30" stroke="#9fc2df" stroke-width="2"/>
                        <line id="dLine" x1="40" y1="50" x2="240" y2="200" stroke="#2b6fa6" stroke-width="3" stroke-linecap="round"/>
                        <line id="sLine" x1="40" y1="220" x2="240" y2="80" stroke="#4b95c9" stroke-width="3" stroke-linecap="round"/>
                        <circle id="eqPoint" cx="150" cy="150" r="4" fill="#123e53" />
                    </svg>
                </div>

                <p class="hint">I-slide ang mga parameter para makita kung paano nagbabago ang P* at Q* — modelo ng interaksiyon ng supply at demand.</p>
            </article>
        </section>

  <!-- IBA'T IBANG ESTRUKTURA NG PAMILIHAN -->
  <section class="lesson">
    <div class="lesson-bg">
      <img src="estruk1.jpg" alt="Estruktura ng Pamilihan 1" class="lesson-img">
      <img src="estruk2.jpg" alt="Estruktura ng Pamilihan 2" class="lesson-img">
    </div>
    <h2 class="lesson-title">IBA'T IBANG ESTRUKTURA NG PAMILIHAN</h2>
    <div class="lesson-text">

            <article class="lesson-body">
                <h3 class="section-title">Konsepto ng Pamilihan</h3>
                <p>Ang <strong>pamilihan</strong> ay lugar kung saan nagtatagpo ang mamimili at prodyuser upang magpalitan ng produkto at serbisyo.</p>

                <h3 class="section-title">Mga Elemento ng Pamilihan</h3>
                <ol>
                    <li>Mamimili</li>
                    <li>Prodyuser / Negosyante</li>
                    <li>Produkto o Serbisyo</li>
                </ol>

                <h3 class="section-title">Mga Uri ng Pamilihan</h3>
                <ul>
                    <li>Lokal</li>
                    <li>Panrehiyon</li>
                    <li>Pambansa</li>
                    <li>Pandaigdigan</li>
                </ul>

                <h3 class="section-title">Estruktura ng Pamilihan</h3>
                <p>May dalawang pangkalahatang uri: <strong>Ganap na Kompetisyon</strong> at <strong>Di-Ganap na Kompetisyon</strong>. Bawat isa may sariling katangian.</p>

                <table id="marketStruct" class="data-table">
                    <thead><tr><th>Estruktura</th><th>Mahahalagang Tala</th></tr></thead>
                    <tbody>
                        <tr onclick="toggleRow(this)">
                            <td>Ganap na Kompetisyon</td>
                            <td>Maraming mamimili at nagtitinda ng magkakatulad na produkto; walang sinuman ang may kontrol sa presyo; malayang pagpasok at paglabas sa industriya; halimbawa: palengke ng bigas, prutas, gulay.</td>
                        </tr>
                        <tr onclick="toggleRow(this)">
                            <td>Monopolyo</td>
                            <td>Iisang nagbebenta; may malakas na kontrol sa presyo (hal. ilang utility tulad ng Meralco, Maynilad).</td>
                        </tr>
                        <tr onclick="toggleRow(this)">
                            <td>Monopolistikong Kompetisyon</td>
                            <td>Maraming nagbebenta na may bahagyang magkaibang produkto; halimbawa: mga fastfood chains tulad ng Jollibee.</td>
                        </tr>
                        <tr onclick="toggleRow(this)">
                            <td>Oligopolyo</td>
                            <td>Iilang malalaking kompanya ang kumokontrol sa merkado; maaaring magkakatulad o magkakaibang produkto (hal. Petron, Globe, Smart).</td>
                        </tr>
                        <tr onclick="toggleRow(this)">
                            <td>Monopsonyo</td>
                            <td>Iisang mamimili ngunit maraming nagbebenta; ang mamimili ang may kapangyarihang magtakda ng presyo (hal. pamahalaan sa ilang pagbili).</td>
                        </tr>
                    </tbody>
                </table>
            </article>
        </section>

  <!-- BAHAGING GINAGAMPANAN NG PAMAHALAAN -->
  <section class="lesson">
    <div class="lesson-bg">
      <img src="pama1.jpg" alt="Pamahalaan 1" class="lesson-img">
      <img src="pama2.jpg" alt="Pamahalaan 2" class="lesson-img">
    </div>
    <h2 class="lesson-title">BAHAGING GINAGAMPANAN NG PAMAHALAAN SA REGULASYON NG MGA GAWAING PANGKABUHAYAN</h2>
    <div class="lesson-text">

            <article class="lesson-body">
                <h3 class="section-title">Price Control</h3>
                <p>Ang pagtatakda ng pamahalaan ng pinakamataas at pinakamababang presyo para sa produkto at serbisyo upang maprotektahan ang mamimili at prodyuser, lalo na sa panahon ng krisis o kalamidad.</p>

                <h3 class="section-title">Republic Act No. 7581 (Price Control Act)</h3>
                <p>Layunin nitong bigyan ang pamahalaan ng kapangyarihang magpatupad ng price ceiling at sundin ang mga hakbang upang mapanatili ang abot-kayang presyo ng pangunahing bilihin.</p>

                <h3 class="section-title">National Price Coordination Council</h3>
                <p>Itinatag upang mabantayan ang presyo ng mga produkto at isakatuparan ang mga patakarang pang-presyo kapag may price ceiling o iba pang hakbang ang pamahalaan.</p>

                <h3 class="section-title">Price Ceiling</h3>
                <p>Ang pinakamataas na presyong itinakda ng pamahalaan; karaniwang itinatakda ito <em>mas mababa</em> sa equilibrium price upang protektahan ang mamimili mula sa pagtaas ng presyo. Maaari itong magdulot ng <strong>SHORTAGE</strong> kapag Qd &gt; Qs.</p>

                <h3 class="section-title">Price Support / Floor Price</h3>
                <p>Ang price support o <strong>floor price</strong> ay itinatakda upang protektahan ang prodyuser at kadalasang inilalagay <em>mas mataas</em> kaysa sa equilibrium price; maaaring magdulot ito ng <strong>SURPLUS</strong> kapag Qs &gt; Qd.</p>

                <h3 class="section-title">Interactive: Subukan ang Price Control</h3>
                <p>Piliin kung <em>price ceiling</em> o <em>price floor</em> at ilagay ang halaga; titingnan kung ito ay magdudulot ng SHORTAGE o SURPLUS batay sa kasalukuyang P* at Q* mula sa seksyon ng Ekwilibriyo.</p>

                <div class="price-control">
                    <label><input type="radio" name="pc" value="ceiling" checked> Price Ceiling</label>
                    <label><input type="radio" name="pc" value="floor"> Price Floor</label>
                    <div class="pc-inputs">
                        <label>Control Price: <input type="number" id="controlPrice" value="50" min="1" oninput="priceControlCheck()"></label>
                        <button class="toggle-btn" onclick="priceControlCheck()">Suriin ang Epekto</button>
                    </div>
                    <div id="pcOutput" class="pc-output">Dito lalabas ang resulta ng pagsusuri.</div>
                </div>

                <h3 class="section-title">Price Support</h3>
                <p>Ginagawa ng pamahalaan upang tulungan ang mga prodyuser at mabayaran ang gastos sa produksyon (hal. subsidiya). Maaari ring gamitin ang mga mekanismong pang-export o stockpiling para kontrolin ang supply.</p>

                <h3 class="section-title">Tungkulin ng Pamahalaan</h3>
                <ul>
                    <li>Magpatupad ng regulasyon at batas upang tiyakin ang patas na kalakalan.</li>
                    <li>Magbigay ng subsidyo o tulong sa mga prodyuser kung kinakailangan.</li>
                    <li>Protektahan ang kapakanan ng mamimili laban sa mga mapagsamantalang negosyante.</li>
                    <li>Magsagawa ng monitoring at koordinasyon (hal. National Price Coordination Council).</li>
                </ul>
            </article>
        </section>

    <script>
        // Ipakita/tago helper
        function toggleShow(id) {
            const el = document.getElementById(id);
            if (!el) return;
            el.style.display = (el.style.display === 'block' || el.style.display === '') ? 'none' : 'block';
        }

        // Flashcard keyboard focus flip (accessibility)
        document.querySelectorAll('.flashcard').forEach(fc => {
            fc.addEventListener('keydown', e => {
                if (e.key === 'Enter' || e.key === ' ') {
                    fc.classList.toggle('flipped');
                }
            });
            fc.addEventListener('click', () => fc.classList.toggle('flipped'));
        });

        // Ekwilibriyo interactivity (tagalog labels)
        const ad = document.getElementById('ad');
        const bd = document.getElementById('bd');
        const asv = document.getElementById('as');
        const bsv = document.getElementById('bs');
        const adVal = document.getElementById('adVal');
        const bdVal = document.getElementById('bdVal');
        const asVal = document.getElementById('asVal');
        const bsVal = document.getElementById('bsVal');
        const pStarEl = document.getElementById('pStar');
        const qStarEl = document.getElementById('qStar');
        const dLine = document.getElementById('dLine');
        const sLine = document.getElementById('sLine');
        const eqPoint = document.getElementById('eqPoint');

        function updateEQ() {
            adVal.textContent = ad.value;
            bdVal.textContent = bd.value;
            asVal.textContent = asv.value;
            bsVal.textContent = bsv.value;

            const a_d = Number(ad.value);
            const b_d = Number(bd.value);
            const a_s = Number(asv.value);
            const b_s = Number(bsv.value);

            const numerator = a_d + a_s;
            const denominator = b_d + b_s;
            let pStar = '—';
            let qStar = '—';
            if (denominator !== 0) {
                pStar = numerator / denominator;
                qStar = a_d - b_d * pStar;
                pStar = Math.round(pStar * 100) / 100;
                qStar = Math.round(qStar * 100) / 100;
            }

            pStarEl.textContent = pStar;
            qStarEl.textContent = qStar;

            // Update graph (map values)
            const minX = 40, maxX = 240, minY = 40, maxY = 240;
            const lowP = 0;
            const highP = Math.max(100, (typeof pStar === 'number' ? Math.abs(pStar)*1.5 : 100));

            const qdLow = a_d - b_d * lowP;
            const qdHigh = a_d - b_d * highP;
            const qsLow = -a_s + b_s * lowP;
            const qsHigh = -a_s + b_s * highP;

            function mapX(P) {
                const denom = (highP - 0) || 1;
                return minX + (P - 0) * (maxX - minX) / denom;
            }
            const qMax = Math.max(qdLow, qdHigh, qsLow, qsHigh, a_d, a_s, 10);
            const qMin = Math.min(qdLow, qdHigh, qsLow, qsHigh, 0);
            function mapY(Q) {
                const denom = (qMax - qMin) || 1;
                return minY + (qMax - Q) * (maxY - minY) / denom;
            }

            const dX1 = mapX(lowP), dY1 = mapY(qdLow);
            const dX2 = mapX(highP), dY2 = mapY(qdHigh);
            const sX1 = mapX(lowP), sY1 = mapY(qsLow);
            const sX2 = mapX(highP), sY2 = mapY(qsHigh);

            dLine.setAttribute('x1', dX1);
            dLine.setAttribute('y1', dY1);
            dLine.setAttribute('x2', dX2);
            dLine.setAttribute('y2', dY2);

            sLine.setAttribute('x1', sX1);
            sLine.setAttribute('y1', sY1);
            sLine.setAttribute('x2', sX2);
            sLine.setAttribute('y2', sY2);

            if (pStar !== '—' && qStar !== '—') {
                const ex = mapX(pStar);
                const ey = mapY(qStar);
                eqPoint.setAttribute('cx', ex);
                eqPoint.setAttribute('cy', ey);
            }
        }

        updateEQ();

        // Price control check
        function priceControlCheck() {
            const control = document.querySelector('input[name="pc"]:checked').value;
            const cp = Number(document.getElementById('controlPrice').value);

            const pText = document.getElementById('pStar').textContent;
            const qText = document.getElementById('qStar').textContent;
            if (pText === '—' || qText === '—') {
                document.getElementById('pcOutput').textContent = 'Hindi matukoy ang equilibrium gamit ang kasalukuyang mga parametro.';
                return;
            }
            const pStar = Number(pText);
            const a_d = Number(ad.value), b_d = Number(bd.value), a_s = Number(asv.value), b_s = Number(bsv.value);
            let qdAtControl = a_d - b_d * cp;
            let qsAtControl = -a_s + b_s * cp;
            qdAtControl = Math.round(qdAtControl * 100) / 100;
            qsAtControl = Math.round(qsAtControl * 100) / 100;

            let out = '';
            if (control === 'ceiling') {
                out += `Price Ceiling na ${cp}. `;
                if (cp < pStar) {
                    out += `Dahil ang ceiling ay mas mababa sa P* (${pStar}), nangangahulugang demand (${qdAtControl}) > supply (${qsAtControl}) → <strong>SHORTAGE</strong>.`;
                } else if (cp === pStar) {
                    out += `Walang SHORTAGE o SURPLUS; nasa ekwilibriyo.`;
                } else {
                    out += `Ang ceiling ay hindi nagiging hadlang (hindi binding).`;
                }
            } else {
                out += `Price Floor na ${cp}. `;
                if (cp > pStar) {
                    out += `Dahil ang floor ay mas mataas sa P* (${pStar}), supply (${qsAtControl}) > demand (${qdAtControl}) → <strong>SURPLUS</strong>.`;
                } else if (cp === pStar) {
                    out += `Walang SURPLUS o SHORTAGE; nasa ekwilibriyo.`;
                } else {
                    out += `Ang floor ay hindi nagiging hadlang (hindi binding).`;
                }
            }
            document.getElementById('pcOutput').innerHTML = out;
        }

        // Market structures toggles
        function toggleRow(row) {
            const already = row.classList.contains('expanded');
            document.querySelectorAll('#marketStruct tbody tr').forEach(r => r.classList.remove('expanded'));
            if (!already) row.classList.add('expanded');
        }

        // table row click listener (for accessibility)
        document.querySelectorAll('#marketStruct tbody tr').forEach(r=>{
            r.setAttribute('tabindex','0');
            r.addEventListener('keydown', e => { if (e.key === 'Enter') toggleRow(r); });
        });
    </script>

<a href="index.html" id="homepage-link">
    <button id="homepage-button">
        ↑ Back to Homepage
    </button>
</a>

</body>
</html>